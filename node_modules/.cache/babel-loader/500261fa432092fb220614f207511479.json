{"ast":null,"code":"import _classCallCheck from\"/home/tk/DexlockProjects/reactActivity/Metro-Fair-Calculation/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/tk/DexlockProjects/reactActivity/Metro-Fair-Calculation/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/tk/DexlockProjects/reactActivity/Metro-Fair-Calculation/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/tk/DexlockProjects/reactActivity/Metro-Fair-Calculation/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/tk/DexlockProjects/reactActivity/Metro-Fair-Calculation/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import Station from'../station/station';import StationList from'../stationList/stationList';import'./body.css';import Fare from'../fare/fare';var Body=/*#__PURE__*/function(_Component){_inherits(Body,_Component);var _super=_createSuper(Body);function Body(props){var _this;_classCallCheck(this,Body);_this=_super.call(this,props);_this.state={departure:\"\",arrival:\"\",fareid:[{}],farename:[{}],price:\"\"};_this.updateStation=_this.updateStation.bind(_assertThisInitialized(_this));return _this;}_createClass(Body,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"http://52.203.100.234:5010/files/fare_rules.txt\").then(function(res){return res.json();}).then(function(result){_this2.setState({fareid:result});});fetch(\"http://52.203.100.234:5010/files/fare_attributes.txt\").then(function(res){return res.json();}).then(function(result){_this2.setState({farename:result});});}},{key:\"updateStation\",value:function updateStation(stop_name,stop_id,type){if(type==\"departure\"){if(this.state.arrival!=stop_name){this.setState({departure:stop_name,depstopId:stop_id});}}if(type==\"arrival\"){if(this.state.departure!=stop_name){this.setState({arrival:stop_name,arrstopId:stop_id});}}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this3=this;if(this.state.departure&&this.state.arrival){if(prevState.departure!=this.state.departure||prevState.arrival!=this.state.arrival){var fareId=this.state.fareid.filter(function(item){return item.origin_id==_this3.state.depstopId&item.destination_id==_this3.state.arrstopId;});var fareValue=this.state.farename.filter(function(item){return item.fare_id===fareId[0].fare_id;});this.setState({price:fareValue[0].price});}}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bodyContentWrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Metro Station Details and Fare Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"bodyContent\",children:\"By selecting the departure and arrival stations in the below you will be able to see the ticket fare\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scrollList\",children:[/*#__PURE__*/_jsx(StationList,{name:\"Select Departure Station\",type:\"departure\",activeElement:this.state.departure,updateStation:this.updateStation}),/*#__PURE__*/_jsx(StationList,{name:\"Select Arrival Station\",type:\"arrival\",activeElement:this.state.arrival,updateStation:this.updateStation})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fare-description\",children:this.state.departure&&this.state.arrival?/*#__PURE__*/_jsxs(\"div\",{className:\"fareResult\",children:[\"Trip Details\",/*#__PURE__*/_jsxs(\"div\",{className:\"fareResultbox\",children:[/*#__PURE__*/_jsx(Station,{stopName:this.state.departure,stopId:this.state.depstopId,type:\"fare\"}),/*#__PURE__*/_jsx(Station,{stopName:this.state.arrival,stopId:this.state.arrstopId,type:\"fare\"}),/*#__PURE__*/_jsx(Fare,{price:this.state.price})]})]}):/*#__PURE__*/_jsx(\"div\",{})})]});}}]);return Body;}(Component);export default Body;","map":{"version":3,"sources":["/home/tk/DexlockProjects/reactActivity/Metro-Fair-Calculation/src/components/body/body.js"],"names":["React","Component","Station","StationList","Fare","Body","props","state","departure","arrival","fareid","farename","price","updateStation","bind","fetch","then","res","json","result","setState","stop_name","stop_id","type","depstopId","arrstopId","prevProps","prevState","fareId","filter","item","origin_id","destination_id","fareValue","fare_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Station from '../station/station'\nimport StationList from '../stationList/stationList'\nimport './body.css'\nimport Fare from '../fare/fare'\n\nclass Body extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            departure: \"\",\n            arrival: \"\",\n            fareid: [{}],\n            farename: [{}],\n            price: \"\"\n        };\n        this.updateStation = this.updateStation.bind(this);\n\n    }\n    componentDidMount() {\n        fetch(\"http://52.203.100.234:5010/files/fare_rules.txt\")\n            .then(res => res.json())\n            .then(result => {\n                this.setState({ fareid: result });\n            }\n            )\n        fetch(\"http://52.203.100.234:5010/files/fare_attributes.txt\")\n            .then(res => res.json())\n            .then(result => {\n                this.setState({ farename: result });\n            }\n            )\n\n    }\n    updateStation(stop_name, stop_id, type) {\n        if (type == \"departure\") {\n            if (this.state.arrival != stop_name) {\n                this.setState({ departure: stop_name, depstopId: stop_id });\n            }\n\n        }\n        if (type == \"arrival\") {\n            if (this.state.departure != stop_name) {\n                this.setState({ arrival: stop_name, arrstopId: stop_id });\n            }\n        }\n\n    }\n    componentDidUpdate(prevProps, prevState) {\n        if (this.state.departure && this.state.arrival) {\n            if (prevState.departure != this.state.departure || prevState.arrival != this.state.arrival) {\n                var fareId = this.state.fareid.filter(item => {\n                    return (item.origin_id == this.state.depstopId &\n                        item.destination_id == this.state.arrstopId)\n                })\n\n                var fareValue = this.state.farename.filter(item => {\n                    return item.fare_id === fareId[0].fare_id\n                })\n                this.setState({ price: fareValue[0].price })\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"bodyContentWrapper\">\n                    <h2>\n                        Metro Station Details and Fare Details\n                    </h2>\n                    <p className=\"bodyContent\">\n                        By selecting the departure and arrival stations in the below you will be able to see the ticket fare\n                    </p>\n                </div>\n                <div className=\"scrollList\">\n\n                    <StationList name={\"Select Departure Station\"} type=\"departure\" activeElement={this.state.departure} updateStation={this.updateStation} />\n                    <StationList name={\"Select Arrival Station\"} type=\"arrival\" activeElement={this.state.arrival} updateStation={this.updateStation} />\n                </div >\n                <div  className=\"fare-description\">\n                { this.state.departure && this.state.arrival ? <div className=\"fareResult\">\n                    Trip Details\n                    <div className=\"fareResultbox\">\n                        <Station stopName={this.state.departure} stopId={this.state.depstopId} type=\"fare\" />\n                        <Station stopName={this.state.arrival} stopId={this.state.arrstopId} type=\"fare\" />\n                        <Fare price={this.state.price} />\n\n                    </div></div> : <div></div>}\n                    </div>\n\n\n            </div>\n        )\n    }\n}\nexport default Body;"]},"metadata":{},"sourceType":"module"}